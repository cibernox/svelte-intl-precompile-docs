<script>
  /**
   * @typedef {Object} Props
   * @property {string} lang
   * @property {boolean} [editable]
   * @property {import('svelte').Snippet} [children]
   */

  /** @type {Props} */
  let { lang = "", editable = false, children } = $props();

  function highlight(node) {
    // @ts-ignore
    window.Prism.highlightElement(node);
  }
  function autofocus(node) {
    if (editable) node.focus();
  }
</script>
<pre 
  contenteditable={editable} 
  use:autofocus 
  {onchange}
  class="p-4 m-12 rounded bg-code overflow-x-auto">
  <code use:highlight>
    <div>{@render children?.()}</div>
  </code>
</pre>
